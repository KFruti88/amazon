<div id="holiday-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; overflow: hidden;"></div>
<div id="countdown-banner" style="position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.8); color: #ff9900; padding: 10px 20px; border: 1px solid #ff9900; border-radius: 8px; font-weight: bold; display: none; z-index: 10000;"></div>

<script>
/**
 * HOLIDAY & NYE COUNTDOWN ENGINE v1.03
 */
function runHolidayEngine() {
    const now = new Date();
    const month = now.getMonth() + 1;
    const day = now.getDate();
    const hour = now.getHours(); // 0-23
    
    // 1. CLEAR OVERLAYS
    const overlay = document.getElementById('holiday-overlay');
    const banner = document.getElementById('countdown-banner');

    // 2. NEW YEAR'S EVE COUNTDOWN LOGIC (Dec 31st)
    if (month === 12 && day === 31) {
        banner.style.display = "block";
        const hourEmojis = {
            13: "1ðŸ•", 14: "2ðŸ•‘", 15: "3ðŸ•’", 16: "4ðŸ•“", 17: "5ðŸ•’", 18: "6ðŸ••",
            19: "7ðŸ•–", 20: "8ðŸ•—", 21: "9ðŸ•˜", 22: "10ðŸ•™", 23: "11ðŸ•š", 0: "ðŸ•› HAPPY NEW YEAR!"
        };

        if (hour >= 13 || hour === 0) {
            const currentEmoji = hourEmojis[hour] || "ðŸ•›";
            banner.innerHTML = `NYE Countdown: ${currentEmoji}`;
            // Special effect for the hour strike
            if (now.getMinutes() < 5) {
                spawnParticles(currentEmoji, "float-up");
            }
        }
    }

    // 3. GENERAL HOLIDAY EMOJIS
    let holidayEmoji = "";
    let animation = "fall";

    if (month === 12 && day < 31) {
        holidayEmoji = "ðŸŽ„"; // Christmas Month
    } else if (month === 1 && day === 1) {
        holidayEmoji = "ðŸ•›"; // New Year's Day
    }

    if (holidayEmoji !== "") {
        spawnParticles(holidayEmoji, animation);
    }
}

function spawnParticles(symbol, type) {
    const container = document.getElementById('holiday-overlay');
    const p = document.createElement('div');
    p.innerText = symbol;
    p.style.position = "absolute";
    p.style.fontSize = "30px";
    p.style.left = Math.random() * 100 + "vw";
    p.style.transition = `transform 8s linear, opacity 2s`;
    
    if (type === "fall") {
        p.style.top = "-50px";
    } else {
        p.style.bottom = "-50px";
    }

    container.appendChild(p);

    setTimeout(() => {
        const dest = type === "fall" ? "110vh" : "-110vh";
        p.style.transform = `translateY(${dest}) rotate(360deg)`;
        setTimeout(() => p.remove(), 8500);
    }, 100);
}

// Check the time every minute to update countdowns
setInterval(runHolidayEngine, 60000);
window.addEventListener('load', runHolidayEngine);
</script>
